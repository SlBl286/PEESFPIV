@page "/CMS"
@using Microsoft.AspNetCore.Authorization;
@using Microsoft.AspNetCore.Components.Authorization
@using PEESFPIV.Frontend.Components.Layout;
@using PEESFPIV.Frontend.Models;
@using System.Security.Claims
@using PEESFPIV.Frontend.States
@using System.Data

@rendermode InteractiveServer
@implements IDisposable
@layout CMSLayout
@inject SidebarState SidebarState



<PageTitle>CMS</PageTitle>

<div class="flex flex-col @(sidebarIsOpen ? "ml-64": "")">
@dataTable.
</div>



@code {
    DataTable dataTable;
    private bool sidebarIsOpen;
    protected override async Task OnInitializedAsync()
    {
        await Task.CompletedTask;
        sidebarIsOpen = SidebarState.IsOpen;
        SidebarState.OnChange += UpdateState;

    }

    void UpdateState()
    {
        sidebarIsOpen = SidebarState.IsOpen;
        StateHasChanged();
    }
    public void Dispose()
    {
        SidebarState.OnChange -= UpdateState;

    }

}